<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Client 1</title>
</head>
<body>
    <!-- message recu  -->
    <p>
        <h4>boite de reception du client1: </h4>
        <p id="receivesms">

        </p>
    </p>

    <!-- message envoye  -->
    <p>
        <h4>boite d'envoie du  client1: </h4>
        <p id="receivesms">

        </p>
    </p>
    
    <p>entrer votre message : <textarea id="sms"></textarea></p>
    <p> <button id="sendBt">Envoyer le message </button></p>
    
    <script type="text/javascript">
        document.addEventListener("DOMContentLoaded", ()=>{
            console.log("etablissement de la connexion avec le serveur ... ");

            const ws = new WebSocket("ws://localhost:8001");
            const message = document.getElementById("sms");

            ws.onopen = ()=>{
                console.log("connexion etablie avec le serveur !! ");
                // console.log(ws);
                // ws.send("bonjour le serveur je suis le client ");    
            };
            
            ws.onerror = (error)=>{
                console.log("erreur lors l'etablissement de la communication : ", error.data);
            };

            ws.onmessage = (message)=>{
                console.log("message recu du client 2", message.data);
            };

            ws.onclose = ()=>{
                console.log("fermeture de la connexion reussit ");
            };

            document.getElementById("sendBt").addEventListener('click', function(){
                ws.send(message.value);
                // console.log(message.value);
            });
        });
    </script>
</body>
</html>